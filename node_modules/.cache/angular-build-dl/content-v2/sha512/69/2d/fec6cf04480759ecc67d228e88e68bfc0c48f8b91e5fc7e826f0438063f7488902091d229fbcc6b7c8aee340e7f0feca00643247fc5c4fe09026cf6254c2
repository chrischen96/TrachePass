!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"7wo0":function(n,o,r){"use strict";r.r(o),r.d(o,"SettingsPageModule",function(){return S});var a=r("ofXK"),i=r("3Pt+"),c=r("TEn/"),s=r("tyNb"),l=r("mrSG"),u=r("gcOT"),d=r("fXoL"),b=r("WdVq"),f=r("DPk/"),g=r("EFyh");function h(e,t){if(1&e){var n=d.Ob();d.Nb(0,"div",13),d.Nb(1,"ion-button",14),d.Vb("click",function(){return d.hc(n),d.Xb().resetStorage()}),d.Jb(2,"ion-icon",15),d.Nb(3,"ion-text",4),d.mc(4,"Reset Storage"),d.Mb(),d.Mb(),d.Mb()}}function m(e,t){1&e&&(d.Nb(0,"div",16),d.Nb(1,"ion-text"),d.mc(2,"Storage has been reseted."),d.Mb(),d.Mb())}var p,v,C,M=u.e.Storage,x=[{path:"",component:(p=function(){function n(t,o,r,a){e(this,n),this.alertController=t,this.barcodeScanner=o,this.userDataService=r,this.LoginService=a,this.isResetStorage=!1,this.barcodeScannerOptions={showTorchButton:!0,showFlipCameraButton:!0}}var o,r,a;return o=n,(r=[{key:"ngOnInit",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userDataService.loadUserProfile();case 2:console.log("started app");case 3:case"end":return e.stop()}},e,this)}))}},{key:"alertScanCode",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Confirm Update!",message:"The record in the App will be replaced by the values scanned from QR Code",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(e){console.log("Confirm Cancel: blah")}},{text:"Confirm",handler:function(e){n.scanCode()}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"scanCode",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.barcodeScanner.scan().then(function(e){console.log(e),t.scannedData=JSON.parse(e.text),console.log("Scanning User Data"),console.log(t.scannedData.userProfile),console.log(typeof t.scannedData.userProfile),console.log("Scanning Medical Data"),console.log(t.scannedData.medicalRecord),console.log(typeof t.scannedData.medicalRecord),console.log("ending Data"),M.set({key:t.userDataService.userProfileKey,value:t.scannedData.userProfile}),M.set({key:t.userDataService.medicalRecordKey,value:t.scannedData.medicalRecord})}).catch(function(e){console.log("Error",e)});case 2:case"end":return e.stop()}},e,this)}))}},{key:"encodData",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.userDataService.convertToString(),e.next=3,this.barcodeScanner.encode(this.barcodeScanner.Encode.TEXT_TYPE,this.userDataService.userProfileString).then(function(e){console.log(e),t.encodeData=e},function(e){console.log("Error occured : "+e)});case 3:case"end":return e.stop()}},e,this)}))}},{key:"resetStorage",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Reset Storage",message:"All data will be deleted.",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(e){console.log("Confirm Cancel: cancel")}},{text:"Delete",handler:function(e){M.clear(),n.isResetStorage=!0}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:console.log("Storage Cleared");case 6:case"end":return e.stop()}},e,this)}))}}])&&t(o.prototype,r),a&&t(o,a),n}(),p.\u0275fac=function(e){return new(e||p)(d.Ib(c.b),d.Ib(b.a),d.Ib(f.a),d.Ib(g.a))},p.\u0275cmp=d.Cb({type:p,selectors:[["app-settings"]],decls:26,vars:2,consts:[["slot","start"],["defaultHref","home"],["color","secondary","expand","block",2,"margin-bottom","5%",3,"click"],["slot","start","name","qr-code-outline"],["slot","end"],["color","secondary","expand","block","routerLink","qr-code-gen",2,"margin-bottom","5%"],["slot","start","name","share-outline"],["color","warning","expand","block","routerLink","version-history",2,"margin-bottom","5%"],["slot","start","name","reload-outline"],["color","danger","expand","block","routerLink","change-pw",2,"margin-bottom","5%"],["slot","start","name","lock-closed-outline"],["id","reset",4,"ngIf"],["id","isReset",4,"ngIf"],["id","reset"],["color","medium","expand","block",3,"click"],["slot","start","name","trash-outline"],["id","isReset"]],template:function(e,t){1&e&&(d.Nb(0,"ion-header"),d.Nb(1,"ion-toolbar"),d.Nb(2,"ion-buttons",0),d.Jb(3,"ion-back-button",1),d.Mb(),d.Nb(4,"ion-title"),d.mc(5,"Settings"),d.Mb(),d.Mb(),d.Mb(),d.Nb(6,"ion-content"),d.Nb(7,"div"),d.Nb(8,"ion-button",2),d.Vb("click",function(){return t.alertScanCode()}),d.Jb(9,"ion-icon",3),d.Nb(10,"ion-text",4),d.mc(11,"Import from QR Code"),d.Mb(),d.Mb(),d.Nb(12,"ion-button",5),d.Jb(13,"ion-icon",6),d.Nb(14,"ion-text",4),d.mc(15,"Export To QR Code"),d.Mb(),d.Mb(),d.Nb(16,"ion-button",7),d.Jb(17,"ion-icon",8),d.Nb(18,"ion-text",4),d.mc(19,"Version History"),d.Mb(),d.Mb(),d.Nb(20,"ion-button",9),d.Jb(21,"ion-icon",10),d.Nb(22,"ion-text",4),d.mc(23,"Change Password"),d.Mb(),d.Mb(),d.Mb(),d.lc(24,h,5,0,"div",11),d.lc(25,m,3,0,"div",12),d.Mb()),2&e&&(d.xb(24),d.dc("ngIf",!t.isResetStorage),d.xb(1),d.dc("ngIf",t.isResetStorage))},directives:[c.v,c.M,c.h,c.e,c.f,c.K,c.p,c.g,c.w,c.I,c.S,s.h,a.l],styles:["div[_ngcontent-%COMP%]{width:80%;margin:10% auto auto}ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:absolute;left:10%}ion-button[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{position:absolute;left:30%}div[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:8%}#isReset[_ngcontent-%COMP%], #reset[_ngcontent-%COMP%]{position:fixed;left:50%;transform:translate(-50%);bottom:10%}#isReset[_ngcontent-%COMP%]{width:80%;text-align:center}#isReset[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{color:red;font-weight:700;font-size:large}#isReset[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:red}"]}),p)}],w=((C=function t(){e(this,t)}).\u0275mod=d.Gb({type:C}),C.\u0275inj=d.Fb({factory:function(e){return new(e||C)},imports:[[s.i.forChild(x)],s.i]}),C),S=((v=function t(){e(this,t)}).\u0275mod=d.Gb({type:v}),v.\u0275inj=d.Fb({factory:function(e){return new(e||v)},imports:[[a.b,i.d,c.N,w]]}),v)}}])}();