{"version":3,"sources":["./src/app/services/appointment.service.ts","./src/app/appointment-reminder/appointment-reminder-routing.module.ts","./src/app/appointment-reminder/appointment-reminder.module.ts"],"names":[],"mappings":"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","file":"appointment-reminder-appointment-reminder-module-es2015.js","sourcesContent":["import { Injectable } from '@angular/core';\n//import { LocalNotifications } from '@ionic-native/local-notifications/ngx';\nimport { LocalNotification, LocalNotificationsPlugin, Plugins } from '@capacitor/core';\n//import { LocalNotification, LocalNotificationPendingList, Plugins, } from '@capacitor/core';\nconst { Storage, LocalNotifications } = Plugins;\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AppointmentService {\n  public appointments = {};\n  //set the strage key for photos can be changed\n  private APPOINTMENT_STORAGE: string = \"appointment\";\n\n  constructor(\n  ) { }\n\n  async loadAppointment(){\n    // create a promise that load the data from database\n    const appiontmentGet = await Storage.get({ key: this.APPOINTMENT_STORAGE });\n    // set the current session value using data from DB, if it doesn't exist it wll initialize a empty array\n    this.appointments = JSON.parse(appiontmentGet.value) || {};\n    console.log(this.appointments);\n    console.log(\"finished loading\");\n    await LocalNotifications.requestPermission();\n    console.log(LocalNotifications.getPending());\n  }\n\n  saveValue() {\n    const JSONString = JSON.stringify(this.appointments);\n    // store the value in to the pair\n    Storage.set({\n      key: this.APPOINTMENT_STORAGE,\n      value: JSONString\n    })\n  }\n\n  public async setReminder(appointment:{}, id:number) {\n    const date = appointment[\"appointmentDate\"].slice(0,10);\n    const time = appointment[\"appointmentDate\"].slice(11);\n    const alarm = appointment[\"alarmDateTime\"];\n    const title = appointment[\"title\"];\n    const doctor = appointment[\"doctor\"];\n    const location = appointment[\"location\"];\n\n    const notificationTitle = title;\n    const appointmentDateTime = new Date(appointment['appointmentDate']);\n    const displayTime = time.slice(0, 5)\n    const displayDate = date.slice(8) + '/' + date.slice(5, 7) + '/' + date.slice(0, 4)\n    const notificationText  = \"You have an appointment at \" + displayTime + \" on \" + displayDate + \" with \" + doctor + \" at \" + location;\n    \n    console.log(appointment);\n    console.log(id);\n    const notifs = await LocalNotifications.schedule({\n      notifications: [\n        {\n          title: notificationTitle,\n          body: notificationText,\n          id: id,\n          schedule: { at: new Date(appointmentDateTime.getTime() - alarm) },\n          sound: 'default',\n          attachments: null,\n          actionTypeId: \"\",\n          extra: null,\n        }\n      ]\n    });\n    console.log(LocalNotifications.getPending());\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { AppointmentReminderPage } from './appointment-reminder.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AppointmentReminderPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AppointmentReminderPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n// must import this two module in the form page and add to @NgModule\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { AppointmentReminderPageRoutingModule } from './appointment-reminder-routing.module';\nimport { AppointmentReminderPage } from './appointment-reminder.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AppointmentReminderPageRoutingModule,\n    ReactiveFormsModule\n  ],\n  declarations: [AppointmentReminderPage]\n})\nexport class AppointmentReminderPageModule {}\n"],"sourceRoot":"webpack:///"}